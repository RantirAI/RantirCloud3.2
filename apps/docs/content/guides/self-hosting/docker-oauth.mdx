---
title: 'Configure Social Login (OAuth) Providers'
description: 'Set up social login (OAuth/OIDC) providers for self-hosted Supabase with Docker.'
subtitle: 'Set up social login (OAuth/OIDC) providers for self-hosted Supabase with Docker.'
---

This guide covers the **server-side configuration** required to enable social login providers on a self-hosted Supabase instance running with Docker Compose. This applies to all OAuth and OIDC-based providers, including third-party identity providers like Keycloak.

For client-side implementation (sign-in buttons, redirect handling, etc.), see the [Social Login](/docs/guides/auth/social-login) documentation.

## Before you begin

You need:

- A working self-hosted Supabase installation. See [Self-Hosting with Docker](/docs/guides/self-hosting/docker).
- `API_EXTERNAL_URL` set to the publicly reachable URL of your Supabase instance (e.g., `https://supabase.example.com`).

<Admonition type="danger">

HTTPS is strongly recommended in production. Most OAuth providers reject `http://` callback URLs (except `localhost`).

</Admonition>

Your **OAuth callback URL** is:

```
{API_EXTERNAL_URL}/auth/v1/callback
```

For example, if `API_EXTERNAL_URL=https://supabase.example.com`, the callback URL is:

```
https://supabase.example.com/auth/v1/callback
```

You will register this URL with each OAuth provider.

## How it works

When a user signs in with an OAuth provider, the following flow occurs:

1. Your app calls `supabase.auth.signInWithOAuth()` and the browser redirects to the Auth service
2. Kong routes the request to the Auth container (`/auth/v1/authorize`)
3. Auth redirects the user to the OAuth provider (e.g., Google) for consent
4. The provider redirects back to `{API_EXTERNAL_URL}/auth/v1/callback`
5. Auth exchanges the authorization code for tokens and redirects the user to your `SITE_URL` or an allowed redirect URL

### Environment variable naming convention

The Auth service (GoTrue) uses the prefix `GOTRUE_EXTERNAL_{PROVIDER}_` for all OAuth configuration. For example, Google uses:

- `GOTRUE_EXTERNAL_GOOGLE_ENABLED`
- `GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID`
- `GOTRUE_EXTERNAL_GOOGLE_SECRET`
- `GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI`

### The two-file requirement

<Admonition type="caution">

Adding variables to `.env` alone does **nothing** for the auth container. You must also pass them through in `docker-compose.yml`.

</Admonition>

Docker Compose only forwards environment variables that are explicitly listed in a service's `environment:` block. You must:

1. Define the variable value in `.env`
2. Reference it in the `auth` service's `environment:` block in `docker-compose.yml`

## Step-by-step configuration

### Step 1 - Add environment variables to `.env`

Add the provider's credentials to your `.env` file. At minimum, each provider needs:

```bash name=.env
GOOGLE_ENABLED=true
GOOGLE_CLIENT_ID=your-client-id
GOOGLE_SECRET=your-client-secret
```

### Step 2 - Pass variables through in `docker-compose.yml`

In the `auth` service's `environment:` block, reference the `.env` variables:

```yaml name=docker-compose.yml
auth:
  environment:
    # ... existing variables ...
    GOTRUE_EXTERNAL_GOOGLE_ENABLED: ${GOOGLE_ENABLED}
    GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
    GOTRUE_EXTERNAL_GOOGLE_SECRET: ${GOOGLE_SECRET}
    GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

<Admonition type="tip">

The `REDIRECT_URI` is always `{API_EXTERNAL_URL}/auth/v1/callback`. Since `API_EXTERNAL_URL` is already defined in `.env`, you can reference it directly.

</Admonition>

### Step 3 - Register your app with the provider

Go to the OAuth provider's developer console and create an application. Set the **authorized redirect URI** to:

```
{API_EXTERNAL_URL}/auth/v1/callback
```

Copy the **Client ID** and **Client Secret** into your `.env` file.

### Step 4 - Restart the auth service

```sh
docker compose up -d auth
```

### Step 5 - Verify the configuration

Check that the provider appears as enabled:

```sh
curl http://localhost:8000/auth/v1/settings
```

The response should include your provider under `external`:

```json
{
  "external": {
    "google": true
  }
}
```

## Provider-specific setup

<Tabs
  scrollable
  size="small"
  type="underlined"
  defaultActiveId="google"
>

<TabPanel id="google" label="Google">

**Google Cloud Console setup:**

1. Go to [Google Cloud Console](https://console.cloud.google.com/apis/credentials)
2. Create or select a project
3. Go to **APIs & Services** > **Credentials**
4. Click **Create Credentials** > **OAuth client ID**
5. Set application type to **Web application**
6. Under **Authorized redirect URIs**, add: `{API_EXTERNAL_URL}/auth/v1/callback`
7. Copy the Client ID and Client Secret

**`.env` variables:**

```bash name=.env
GOOGLE_ENABLED=true
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_SECRET=your-google-client-secret
```

**`docker-compose.yml` passthrough:**

```yaml name=docker-compose.yml
GOTRUE_EXTERNAL_GOOGLE_ENABLED: ${GOOGLE_ENABLED}
GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
GOTRUE_EXTERNAL_GOOGLE_SECRET: ${GOOGLE_SECRET}
GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

</TabPanel>

<TabPanel id="github" label="GitHub">

**GitHub setup:**

1. Go to [GitHub Developer Settings](https://github.com/settings/developers)
2. Click **New OAuth App**
3. Set **Authorization callback URL** to: `{API_EXTERNAL_URL}/auth/v1/callback`
4. Copy the Client ID and generate a Client Secret

**`.env` variables:**

```bash name=.env
GITHUB_ENABLED=true
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_SECRET=your-github-client-secret
```

**`docker-compose.yml` passthrough:**

```yaml name=docker-compose.yml
GOTRUE_EXTERNAL_GITHUB_ENABLED: ${GITHUB_ENABLED}
GOTRUE_EXTERNAL_GITHUB_CLIENT_ID: ${GITHUB_CLIENT_ID}
GOTRUE_EXTERNAL_GITHUB_SECRET: ${GITHUB_SECRET}
GOTRUE_EXTERNAL_GITHUB_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

<Admonition type="tip">

For **GitHub Enterprise** (self-hosted), also set `GOTRUE_EXTERNAL_GITHUB_URL` to your GitHub instance URL (e.g., `https://github.example.com`).

</Admonition>

</TabPanel>

<TabPanel id="apple" label="Apple">

**Apple Developer setup:**

1. Go to [Apple Developer](https://developer.apple.com/account/resources/identifiers/list/serviceId) and create a Services ID
2. Enable **Sign In with Apple** and configure the domain and return URL: `{API_EXTERNAL_URL}/auth/v1/callback`
3. Create a private key for Sign In with Apple and download the `.p8` file
4. Generate a client secret JWT from your private key. See [Apple's documentation](https://developer.apple.com/documentation/accountorganizationaldatasharing/creating-a-client-secret) for details.

**`.env` variables:**

```bash name=.env
APPLE_ENABLED=true
APPLE_CLIENT_ID=com.example.your-services-id
APPLE_SECRET=your-generated-jwt-client-secret
```

**`docker-compose.yml` passthrough:**

```yaml name=docker-compose.yml
GOTRUE_EXTERNAL_APPLE_ENABLED: ${APPLE_ENABLED}
GOTRUE_EXTERNAL_APPLE_CLIENT_ID: ${APPLE_CLIENT_ID}
GOTRUE_EXTERNAL_APPLE_SECRET: ${APPLE_SECRET}
GOTRUE_EXTERNAL_APPLE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

<Admonition type="note">

Apple uses `response_mode=form_post` for its OAuth flow. The Auth service handles this automatically — no additional configuration is needed.

</Admonition>

</TabPanel>

<TabPanel id="azure" label="Azure">

**Azure Portal setup:**

1. Go to [Azure Portal](https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade) > **App registrations**
2. Click **New registration**
3. Under **Redirect URI**, select **Web** and enter: `{API_EXTERNAL_URL}/auth/v1/callback`
4. Copy the **Application (client) ID**
5. Go to **Certificates & secrets** > **New client secret** and copy the value

**`.env` variables:**

```bash name=.env
AZURE_ENABLED=true
AZURE_CLIENT_ID=your-azure-application-client-id
AZURE_SECRET=your-azure-client-secret
## Optional: restrict to a specific tenant (defaults to 'common')
# AZURE_URL=https://login.microsoftonline.com/your-tenant-id
```

**`docker-compose.yml` passthrough:**

```yaml name=docker-compose.yml
GOTRUE_EXTERNAL_AZURE_ENABLED: ${AZURE_ENABLED}
GOTRUE_EXTERNAL_AZURE_CLIENT_ID: ${AZURE_CLIENT_ID}
GOTRUE_EXTERNAL_AZURE_SECRET: ${AZURE_SECRET}
GOTRUE_EXTERNAL_AZURE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
## Optional: uncomment for tenant-specific Azure login
# GOTRUE_EXTERNAL_AZURE_URL: ${AZURE_URL}
```

</TabPanel>

</Tabs>

### Other supported providers

The Auth service supports 20+ OAuth providers. Each follows the same `GOTRUE_EXTERNAL_{PROVIDER}_*` pattern. Below is a reference for all providers:

| Provider | Env prefix | Extra variables | Docs |
|----------|-----------|-----------------|------|
| Apple | `APPLE_` | — | [Login with Apple](/docs/guides/auth/social-login/auth-apple) |
| Azure (Microsoft) | `AZURE_` | `URL` (tenant URL) | [Login with Azure](/docs/guides/auth/social-login/auth-azure) |
| Bitbucket | `BITBUCKET_` | — | [Login with Bitbucket](/docs/guides/auth/social-login/auth-bitbucket) |
| Discord | `DISCORD_` | — | [Login with Discord](/docs/guides/auth/social-login/auth-discord) |
| Facebook | `FACEBOOK_` | — | [Login with Facebook](/docs/guides/auth/social-login/auth-facebook) |
| Figma | `FIGMA_` | — | [Login with Figma](/docs/guides/auth/social-login/auth-figma) |
| GitHub | `GITHUB_` | `URL` (for GitHub Enterprise) | [Login with GitHub](/docs/guides/auth/social-login/auth-github) |
| GitLab | `GITLAB_` | `URL` (for self-hosted GitLab) | [Login with GitLab](/docs/guides/auth/social-login/auth-gitlab) |
| Google | `GOOGLE_` | — | [Login with Google](/docs/guides/auth/social-login/auth-google) |
| Kakao | `KAKAO_` | — | [Login with Kakao](/docs/guides/auth/social-login/auth-kakao) |
| Keycloak (OIDC) | `KEYCLOAK_` | `URL` (realm URL, **required**) | [Login with Keycloak](/docs/guides/auth/social-login/auth-keycloak) |
| LinkedIn (OIDC) | `LINKEDIN_OIDC_` | — | [Login with LinkedIn](/docs/guides/auth/social-login/auth-linkedin) |
| Notion | `NOTION_` | — | [Login with Notion](/docs/guides/auth/social-login/auth-notion) |
| Slack (OIDC) | `SLACK_OIDC_` | — | [Login with Slack](/docs/guides/auth/social-login/auth-slack) |
| Snapchat | `SNAPCHAT_` | — | — |
| Spotify | `SPOTIFY_` | — | [Login with Spotify](/docs/guides/auth/social-login/auth-spotify) |
| Twitch | `TWITCH_` | — | [Login with Twitch](/docs/guides/auth/social-login/auth-twitch) |
| Twitter | `TWITTER_` | — | [Login with Twitter](/docs/guides/auth/social-login/auth-twitter) |
| WorkOS | `WORKOS_` | — | [Login with WorkOS](/docs/guides/auth/social-login/auth-workos) |
| Zoom | `ZOOM_` | — | [Login with Zoom](/docs/guides/auth/social-login/auth-zoom) |

For each provider, you need at minimum `ENABLED`, `CLIENT_ID`, `SECRET`, and `REDIRECT_URI` in `docker-compose.yml`. The `.env` variable names do not include the `GOTRUE_EXTERNAL_` prefix — that is added in the Docker Compose passthrough.

<Admonition type="tip">

**Keycloak** requires `GOTRUE_EXTERNAL_KEYCLOAK_URL` set to your realm URL (e.g., `https://keycloak.example.com/realms/myrealm`). Without this, the Auth service cannot discover Keycloak's OIDC endpoints.

</Admonition>

## Complete example: Google OAuth

This walkthrough starts from a fresh self-hosted Supabase setup and adds Google OAuth.

### 1. Create Google OAuth credentials

1. Open [Google Cloud Console](https://console.cloud.google.com/apis/credentials)
2. Create a new project or select an existing one
3. If prompted, configure the **OAuth consent screen** (External, fill in app name and email)
4. Go to **Credentials** > **Create Credentials** > **OAuth client ID**
5. Application type: **Web application**
6. Authorized redirect URIs: add `https://supabase.example.com/auth/v1/callback` (replace with your `API_EXTERNAL_URL`)
7. Click **Create** and note the **Client ID** and **Client Secret**

### 2. Edit `.env`

Add the following after the phone auth section:

```bash name=.env
## OAuth - Google
GOOGLE_ENABLED=true
GOOGLE_CLIENT_ID=123456789-abcdef.apps.googleusercontent.com
GOOGLE_SECRET=GOCSPX-your-secret-here
```

### 3. Edit `docker-compose.yml`

In the `auth` service `environment:` block, add after the phone/SMS variables:

```yaml name=docker-compose.yml
services:
  auth:
    environment:
      # ... existing variables ...

      GOTRUE_EXTERNAL_GOOGLE_ENABLED: ${GOOGLE_ENABLED}
      GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
      GOTRUE_EXTERNAL_GOOGLE_SECRET: ${GOOGLE_SECRET}
      GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

### 4. Restart the auth service

```sh
docker compose up -d auth
```

### 5. Verify

```sh
curl https://supabase.example.com/auth/v1/settings
```

Confirm `"google": true` appears in the response under `external`.

### 6. Test the login flow

You can test without a full app by saving this as an HTML file and opening it in your browser:

```html name=test-oauth.html
<!DOCTYPE html>
<html>
<body>
  <h1>Supabase OAuth Test</h1>
  <button onclick="login()">Sign in with Google</button>
  <pre id="result"></pre>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // Replace these with your actual values
    const SUPABASE_URL = 'https://supabase.example.com'
    const SUPABASE_ANON_KEY = 'your-anon-key'

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

    async function login() {
      const { data, error } = await supabase.auth.signInWithOAuth({
        provider: 'google',
      })
      if (error) document.getElementById('result').textContent = JSON.stringify(error, null, 2)
    }

    // Check for session on page load (after redirect back)
    supabase.auth.getSession().then(({ data }) => {
      if (data.session) {
        document.getElementById('result').textContent =
          'Logged in as: ' + data.session.user.email
      }
    })
  </script>
</body>
</html>
```

<Admonition type="tip">

Make sure `SITE_URL` or `ADDITIONAL_REDIRECT_URLS` includes the URL where you open this test page (e.g., `http://localhost:3000`). Otherwise the Auth service will reject the redirect after login.

</Admonition>

For detailed client-side integration with your framework, see the [Social Login](/docs/guides/auth/social-login) documentation.

## Troubleshooting

### "Provider not enabled" or provider shows `false` in `/auth/v1/settings`

- Check that `GOTRUE_EXTERNAL_{PROVIDER}_ENABLED` is set to `true` in `docker-compose.yml`
- Verify the `.env` variable is not empty. Run `docker compose exec auth env | grep GOOGLE` to inspect the container's environment.

### `redirect_uri_mismatch` error from the provider

The callback URL registered with the OAuth provider does not match what the Auth service sends. Ensure:

- The provider's authorized redirect URI is exactly `{API_EXTERNAL_URL}/auth/v1/callback`
- `API_EXTERNAL_URL` in `.env` matches the URL users access (including protocol and port)
- There are no trailing slashes

### Variables added to `.env` but provider still not working

`.env` variables are **not** automatically available inside the container. You must also add the passthrough in `docker-compose.yml`:

```yaml
GOTRUE_EXTERNAL_{PROVIDER}_ENABLED: ${PROVIDER_ENABLED}
```

Run `docker compose exec auth env | grep GOTRUE_EXTERNAL` to verify the variables are reaching the container.

### `SITE_URL` or redirect URL errors after login

After a successful OAuth login, the Auth service redirects to `SITE_URL` or a URL from `ADDITIONAL_REDIRECT_URLS`. Ensure:

- `SITE_URL` in `.env` is set to your application's URL (e.g., `http://localhost:3000`)
- If your app uses a different redirect URL, add it to `ADDITIONAL_REDIRECT_URLS` (comma-separated)

### Nonce check failure on mobile (Google Sign In)

When using Google Sign In on mobile with ID tokens, nonce verification may fail. Uncomment the following in `docker-compose.yml`:

```yaml
GOTRUE_EXTERNAL_SKIP_NONCE_CHECK: true
```

This is already included as a commented-out line in the default `docker-compose.yml`.

### Auth service fails to start

Check the auth container logs:

```sh
docker compose logs auth
```

Common causes:

- Missing required environment variable (e.g., `CLIENT_ID` or `SECRET` is empty)
- Invalid `API_EXTERNAL_URL` (must be a valid URL with protocol)

## Environment variable reference

All OAuth-related environment variables for the `auth` service in `docker-compose.yml`:

| Variable | Description | Required |
|----------|------------|----------|
| `GOTRUE_EXTERNAL_{PROVIDER}_ENABLED` | Enable the provider (`true`/`false`) | Yes |
| `GOTRUE_EXTERNAL_{PROVIDER}_CLIENT_ID` | OAuth client ID from the provider | Yes |
| `GOTRUE_EXTERNAL_{PROVIDER}_SECRET` | OAuth client secret from the provider | Yes |
| `GOTRUE_EXTERNAL_{PROVIDER}_REDIRECT_URI` | Callback URL: `{API_EXTERNAL_URL}/auth/v1/callback` | Yes |
| `GOTRUE_EXTERNAL_{PROVIDER}_URL` | Base URL for self-hosted or tenant-specific providers (Keycloak, Azure, GitLab, GitHub Enterprise) | Provider-dependent |
| `GOTRUE_EXTERNAL_{PROVIDER}_API_URL` | API endpoint URL override | No |
| `GOTRUE_EXTERNAL_{PROVIDER}_EMAIL_OPTIONAL` | Allow sign-up without email from this provider | No |
| `GOTRUE_EXTERNAL_{PROVIDER}_SKIP_NONCE_CHECK` | Skip nonce verification for ID token flows | No |
| `GOTRUE_SITE_URL` | Default redirect URL after authentication (set via `SITE_URL` in `.env`) | Yes |
| `GOTRUE_URI_ALLOW_LIST` | Additional allowed redirect URLs (set via `ADDITIONAL_REDIRECT_URLS` in `.env`) | No |
